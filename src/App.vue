<template>
  <v-app>
    <!-- 导航栏 -->
    <v-app-bar color="primary" density="comfortable" elevation="4" app>
      <!-- 移动端菜单按钮 -->
      <v-app-bar-nav-icon @click="drawer = !drawer" class="d-lg-none" color="white"></v-app-bar-nav-icon>

      <!-- Logo和标题 -->
      <v-toolbar-title class="font-weight-bold text-white">
        <router-link to="/" class="text-decoration-none text-white">
          🍎 水果生活
        </router-link>
      </v-toolbar-title>

      <v-spacer></v-spacer>

      <!-- 桌面端导航菜单 -->
      <div class="d-none d-lg-flex">
        <v-btn v-for="item in menuItems" :key="item.title" :to="item.to" variant="text" color="white" class="mx-1">
          <v-icon start>{{ item.icon }}</v-icon>
          {{ item.title }}
        </v-btn>
      </div>

      <!-- 用户菜单 -->
      <v-menu>
        <template v-slot:activator="{ props }">
          <v-btn icon v-bind="props" color="white">
            <v-icon>mdi-account-circle</v-icon>
          </v-btn>
        </template>
        <v-list>
          <v-list-item to="/login">
            <template v-slot:prepend>
              <v-icon>mdi-login</v-icon>
            </template>
            <v-list-item-title>登录</v-list-item-title>
          </v-list-item>
          <v-list-item to="/register">
            <template v-slot:prepend>
              <v-icon>mdi-account-plus</v-icon>
            </template>
            <v-list-item-title>注册</v-list-item-title>
          </v-list-item>
        </v-list>
      </v-menu>
    </v-app-bar>

    <!-- 移动端侧边栏 -->
    <v-navigation-drawer v-model="drawer" temporary>
      <v-list>
        <v-list-item v-for="item in menuItems" :key="item.title" :to="item.to" @click="drawer = false">
          <template v-slot:prepend>
            <v-icon>{{ item.icon }}</v-icon>
          </template>
          <v-list-item-title>{{ item.title }}</v-list-item-title>
        </v-list-item>
      </v-list>
    </v-navigation-drawer>

    <!-- 主要内容区域 -->
    <v-main>
      <router-view />
    </v-main>
  </v-app>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const drawer = ref(false)

const menuItems = [
  { title: '首页', icon: 'mdi-home', to: '/' },
  { title: '关于我们', icon: 'mdi-information', to: '/about' },
  { title: '登录', icon: 'mdi-login', to: '/login' },
  { title: '注册', icon: 'mdi-account-plus', to: '/register' }
]
</script>

<style scoped>
/* 确保导航栏文字和图标颜色为白色 */
.v-app-bar .v-toolbar-title a {
  color: white !important;
  text-decoration: none !important;
}

.v-app-bar .v-btn {
  color: white !important;
}

.v-app-bar .v-icon {
  color: white !important;
}

/* 悬停效果 */
.v-app-bar .v-btn:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
}
</style>
